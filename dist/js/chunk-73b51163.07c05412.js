(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73b51163"],{ab74:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-row",{attrs:{gutter:24}},t._l(t.stats,(function(t,e){return a("a-col",{key:e,staticClass:"mb-24",attrs:{span:24,lg:12,xl:6}},[a("WidgetCounter",{attrs:{title:t.title,value:t.value,prefix:t.prefix,suffix:t.suffix,icon:t.icon,status:t.status}})],1)})),1),a("a-row",{attrs:{gutter:24}},[a("a-col",{staticClass:"mb-24",attrs:{span:12,lg:12,xl:24}},[a("a-card",{staticClass:"card card-body border-0",scopedSlots:t._u([{key:"title",fn:function(){return[a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("h6",[t._v("Classement des plus gros clients")]),a("a-form",{staticClass:"normal_login pt-2",attrs:{id:"components-form-demo-normal-login",form:t.form,hideRequiredMark:!0},on:{submit:t.classementSubmit}},[a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["nbr",{initialValue:null,rules:[{required:!0,message:"Veillez entrer un nombre"}]}],expression:"[\n                    'nbr',\n                    {\n                      initialValue: null,\n                      rules: [\n                        {\n                          required: true,\n                          message: 'Veillez entrer un nombre',\n                        },\n                      ],\n                    },\n                  ]"}],staticStyle:{width:"300px"},attrs:{placeholder:"Nombre de carnet",type:"number"}}),a("a-button",{staticClass:"mx-4",attrs:{type:"primary",htmlType:"submit"}},[t._v(" Envoyer ")])],1)],1),a("a-input-search",{staticStyle:{width:"300px"},attrs:{placeholder:"Recherche ici"},on:{change:t.onSearch},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),a("a-button",{staticClass:"mx-2",on:{click:function(e){return t.$router.go(-1)}}},[t._v("Retour")])],1)]},proxy:!0}])},[a("a-table",{attrs:{columns:t.columns,"data-source":t.data,pagination:!0},scopedSlots:t._u([{key:"operation",fn:function(e,o){return[a("router-link",{attrs:{to:{name:"Client_detail",params:{id:o.key}}}},[a("a-button",{attrs:{type:"primary",size:"small"}},[t._v("Détail")])],1)]}}])})],1)],1)],1)],1)},n=[],s=a("bf22"),r={components:{WidgetCounter:s["a"]},beforeCreate(){this.form=this.$form.createForm(this,{name:"normal_login"})},data(){return{callback:"https://dshfood.gescapro.net",token_admin:null,stats:[],columns:[],data:[],row:5,page:1,nbr:0,total_page:0,value:null,buttonText:"Détail"}},mounted(){this.stats=[],this.columns=[{title:"Date de creation",dataIndex:"createdAt",key:"createdAt",scopedSlots:{customRender:"name"}},{title:"Nom/Prénom client",dataIndex:"nom",key:"nom"},{title:"Numéro de téléphone",dataIndex:"numero",key:"numero"},{title:"Profession",dataIndex:"profession",key:"profession"},{title:"Nombre carnet",dataIndex:"nbr_carnet",key:"nbr_carnet"},{title:"Action",key:"Action",scopedSlots:{customRender:"operation"}}],this.listeClient()},methods:{showAlert(t,e,a){this.$notification[t]({message:e,description:a})},listeClient(){let t=localStorage;this.token_admin=t.getItem("token");let e={headers:{Authorization:this.token_admin}};this.$http.post(`${this.callback}/v2/client/carnet-count/0/by-collector/${this.$route.params.id}?all=true`,{},e).then(t=>{let e=t.body.data;console.log(t),this.nbr=t.body.total,this.total_page=t.body.total_pages,console.log(this.nbr),this.data=[];for(let a=0;a<e.length;a++)this.data.push({key:e[a].id,createdAt:new Date(e[a].createdAt).toLocaleString(),nom:e[a].nom,numero:e[a].numero,profession:e[a].profession,nbr_carnet:e[a].nb_carnet})},t=>{this.showAlert("error","Error",t.body.message)})},classementSubmit(t){t.preventDefault(),this.form.validateFields((t,e)=>{if(t)console.log(t);else{let t=localStorage;this.token_admin=t.getItem("token");let a={headers:{Authorization:this.token_admin}};this.$http.post(`${this.callback}/v2/client/carnet-count/${e.nbr}/by-collector/${this.$route.params.id}?all=true`,{},a).then(t=>{let e=t.body.data;console.log(t),this.nbr=t.body.total,this.total_page=t.body.total_pages,console.log(this.nbr),this.data=[];for(let a=0;a<e.length;a++)this.data.push({key:e[a].id,createdAt:new Date(e[a].createdAt).toLocaleString(),nom:e[a].nom,numero:e[a].numero,profession:e[a].profession,nbr_carnet:e[a].nb_carnet})},t=>{this.showAlert("danger","Erreur",t.body.message)})}})},next(){let t=localStorage;this.token_admin=t.getItem("token");let e={headers:{Authorization:this.token_admin}};this.page=this.page+1,this.$http.post(`${this.callback}/v2/classement/general/client/by-carnet-count?row=${this.row}&page=${this.page}`,{},e).then(t=>{let e=t.body.data;console.log(e),this.data=[];let a=Object.keys(e).map((function(t){return e[t]}));console.log(a);for(let o=0;o<a.length;o++)console.log(this.data),this.data.push({key:a[o].id,createdAt:a[o].createdAt,nom:a[o].nom,numero:a[o].numero,profession:a[o].profession,nbr_carnet:a[o].nb_carnet})},t=>{this.showAlert("error","Error",t.body.message)})},preview(){let t=localStorage;this.token_admin=t.getItem("token");let e={headers:{Authorization:this.token_admin}};this.page=this.page-1,this.$http.post(`${this.callback}/v2/classement/general/client/by-carnet-count?row=${this.row}&page=${this.page}`,{},e).then(t=>{let e=t.body.data;console.log(e),this.data=[];let a=Object.keys(e).map((function(t){return e[t]}));console.log(a);for(let o=0;o<a.length;o++)console.log(a[o]),this.data.push({key:a[o].id,createdAt:a[o].createdAt,nom:a[o].nom,numero:a[o].numero,profession:a[o].profession,nbr_carnet:a[o].nb_carnet})},t=>{this.showAlert("error","Error",t.body.message)})},onSearch(){let t=localStorage;this.token_admin=t.getItem("token");let e={headers:{Authorization:this.token_admin}};this.$http.post(`${this.callback}/v2/classement/general/client/by-carnet-count?search=${this.value}&row=${this.row}&page=1`,{},e).then(t=>{let e=t.body.data;console.log(t.body),this.data=[];for(let a=0;a<e.length;a++)this.data.push({key:e[a].id,createdAt:e[a].createdAt,nom:e[a].nom,numero:e[a].numero,profession:e[a].profession,nbr_carnet:e[a].nb_carnet}),this.data_s=this.data},t=>{this.showAlert("error","Error",t.body.message)})}}},i=r,l=a("2877"),c=Object(l["a"])(i,o,n,!1,null,null,null);e["default"]=c.exports},bf22:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{staticClass:"widget-1",attrs:{bordered:!1}},[a("a-statistic",{staticClass:"text-success",class:"text-"+t.status,attrs:{title:t.title,value:t.value,prefix:t.prefix,suffix:t.suffix,precision:0,groupSeparator:"."}}),a("div",{staticClass:"icon",domProps:{innerHTML:t._s(t.icon)}})],1)},n=[],s={props:{title:{type:String,default:""},value:{type:Number,default:0},prefix:{type:String,default:""},suffix:{type:String,default:""},icon:{type:String,default:""},status:{type:String,default:"success"}},data(){return{}}},r=s,i=a("2877"),l=Object(i["a"])(r,o,n,!1,null,null,null);e["a"]=l.exports}}]);
//# sourceMappingURL=chunk-73b51163.07c05412.js.map
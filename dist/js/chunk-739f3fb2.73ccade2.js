(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-739f3fb2"],{"1b84":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-row",{attrs:{gutter:24}},t._l(t.stats,(function(t,e){return a("a-col",{key:e,staticClass:"mb-24",attrs:{span:24,lg:12,xl:6}},[a("WidgetCounter",{attrs:{title:t.title,value:t.value,prefix:t.prefix,suffix:t.suffix,icon:t.icon,status:t.status}})],1)})),1),a("a-row",{attrs:{gutter:24}},[a("a-col",{staticClass:"mb-24",attrs:{span:12,lg:12,xl:24}},[a("a-card",{staticClass:"card card-body border-0",scopedSlots:t._u([{key:"title",fn:function(){return[a("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[a("h6",[t._v("Classement de tous les clients par nombre de carnet")]),a("a-input-search",{staticStyle:{width:"300px"},attrs:{placeholder:"Recherche ici"},on:{change:t.onSearch},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),a("a-button",{staticClass:"mx-2",on:{click:function(e){return t.$router.go(-1)}}},[t._v("Retour")])],1)]},proxy:!0}])},[a("a-table",{attrs:{columns:t.columns,"data-source":t.data,pagination:!0}})],1)],1)],1)],1)},s=[],o=a("bf22"),r={components:{WidgetCounter:o["a"]},data(){return{callback:"https://n2a.gescapro.net",token_admin:null,stats:[],columns:[],data:[],row:5,page:1,nbr:0,total_page:0,value:null,buttonText:"Détail"}},mounted(){this.stats=[],this.columns=[{title:"Date de creation",dataIndex:"createdAt",key:"createdAt",scopedSlots:{customRender:"name"}},{title:"Nom/Prénom client",dataIndex:"nom",key:"nom"},{title:"Numéro de téléphone",dataIndex:"numero",key:"numero"},{title:"Profession",dataIndex:"profession",key:"profession"},{title:"Nombre carnet",dataIndex:"nbr_carnet",key:"nbr_carnet"}],this.listeClient()},methods:{showAlert(t,e,a){this.$notification[t]({message:e,description:a})},listeClient(){let t=localStorage;this.token_admin=t.getItem("token");let e={headers:{Authorization:this.token_admin}};this.$http.get(this.callback+"/statistic/classement/topClientByCarnetBuy",e).then(t=>{let e=t.body.topClientByCarnetsBuy;console.log(e),this.nbr=e.length,console.log(this.nbr),this.data=[];for(let a=0;a<e.length;a++)this.data.push({key:e[a]._id[0].id,createdAt:new Date(e[a]._id[0].createdAt).toLocaleString(),nom:e[a]._id[0].nom,numero:e[a]._id[0].telephone,profession:e[a]._id[0].profession,nbr_carnet:e[a].totalCarnetAcheter})},t=>{this.showAlert("error","Error",t.body.message)})},next(){let t=localStorage;this.token_admin=t.getItem("token");let e={headers:{Authorization:this.token_admin}};this.page=this.page+1,this.$http.post(`${this.callback}/v2/classement/general/client/by-carnet-count?row=${this.row}&page=${this.page}`,{},e).then(t=>{let e=t.body.data;console.log(e),this.data=[];let a=Object.keys(e).map((function(t){return e[t]}));console.log(a);for(let n=0;n<a.length;n++)console.log(this.data),this.data.push({key:a[n].id,createdAt:a[n].createdAt,nom:a[n].nom,numero:a[n].numero,profession:a[n].profession,nbr_carnet:a[n].nb_carnet})},t=>{this.showAlert("error","Error",t.body.message)})},preview(){let t=localStorage;this.token_admin=t.getItem("token");let e={headers:{Authorization:this.token_admin}};this.page=this.page-1,this.$http.post(`${this.callback}/v2/classement/general/client/by-carnet-count?row=${this.row}&page=${this.page}`,{},e).then(t=>{let e=t.body.data;console.log(e),this.data=[];let a=Object.keys(e).map((function(t){return e[t]}));console.log(a);for(let n=0;n<a.length;n++)console.log(a[n]),this.data.push({key:a[n].id,createdAt:a[n].createdAt,nom:a[n].nom,numero:a[n].numero,profession:a[n].profession,nbr_carnet:a[n].nb_carnet})},t=>{this.showAlert("error","Error",t.body.message)})},onSearch(){let t=localStorage;this.token_admin=t.getItem("token");let e={headers:{Authorization:this.token_admin}};this.$http.post(`${this.callback}/v2/classement/general/client/by-carnet-count?search=${this.value}&row=${this.row}&page=1`,{},e).then(t=>{let e=t.body.data;console.log(t.body),this.data=[];for(let a=0;a<e.length;a++)this.data.push({key:e[a].id,createdAt:e[a].createdAt,nom:e[a].nom,numero:e[a].numero,profession:e[a].profession,nbr_carnet:e[a].nb_carnet}),this.data_s=this.data},t=>{this.showAlert("error","Error",t.body.message)})}}},i=r,l=a("2877"),c=Object(l["a"])(i,n,s,!1,null,null,null);e["default"]=c.exports},bf22:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{staticClass:"widget-1",attrs:{bordered:!1}},[a("a-statistic",{staticClass:"text-success",class:"text-"+t.status,attrs:{title:t.title,value:t.value,prefix:t.prefix,suffix:t.suffix,precision:0,groupSeparator:"."}}),a("div",{staticClass:"icon",domProps:{innerHTML:t._s(t.icon)}})],1)},s=[],o={props:{title:{type:String,default:""},value:{type:Number,default:0},prefix:{type:String,default:""},suffix:{type:String,default:""},icon:{type:String,default:""},status:{type:String,default:"success"}},data(){return{}}},r=o,i=a("2877"),l=Object(i["a"])(r,n,s,!1,null,null,null);e["a"]=l.exports}}]);
//# sourceMappingURL=chunk-739f3fb2.73ccade2.js.map